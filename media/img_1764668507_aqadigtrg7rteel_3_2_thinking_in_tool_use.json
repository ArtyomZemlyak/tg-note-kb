{
  "file_id": "AQADigtrG7rteEl-",
  "timestamp": 1764668507,
  "original_filename": "image.jpg",
  "file_hash": "5b69de7c54095ed1e573c7a7a688b6ed48ec43111d5dcc79a20121de8ce2c0de",
  "media_filename": "img_1764668507_aqadigtrg7rteel_3_2_thinking_in_tool_use.jpg",
  "ocr_extracted": true,
  "ocr_length": 1491,
  "ocr_structured": {
    "from_cache": false,
    "document_key": "54dcdb09dc32ec8df3c963c522d412d3",
    "markdown": "## 3.2. Thinking in Tool-Use\n\n## 3.2.1. Thinking Context Management\n\nDeepSeek-K1 has demonstrated that incorporating a thinking process can significantly enhance a model's ability to solve complex problems. Building on this insight, we aim to integrate thinking capabilities into tool-calling scenarios.\n\nWe observed that replicating DeepSeek-K1's stratezg y—discarding reasoning content upon the arrival of the second round of messages—results in significant token inefficiency. This approach forces the model to redundantly re-reason through the entire problem for each subsequent tool call. To mitigate this, we developed a context management strictly tailored for tool-calling scenarios as shown in НМ]\n\n- ¢ Historical reasoning content is discarded only when a new user message is introduced to the conversation. If only tool-related messages (e.g., tool outputs) are appended, the reasoning content is retained throughout the interaction.\n- ® When reasoning traces are removed, the history of tool calls and their results remains preserved in the context.\n\nNotably, certain agent frameworks, such as Roo Code or Terminus, simulate tool interactions via user messages. These frameworks may not fully benefit from our enhanced reasoning persistence due to the context management rules outlined above. Therefore, we recommend utilizing non-thinking models for optimal performance with such architectures.\n\nFigure 4 | Thinking retention mechanism in tool-calling scenarios.\n\n<!-- image -->",
    "export_format": "markdown"
  },
  "processing_metadata": {
    "docling_mcp": {
      "tool": "convert_document_from_content",
      "server": "docling",
      "transport": "sse"
    },
    "docling": {
      "backend": "mcp",
      "tool": "convert_document_from_content",
      "server": "docling",
      "prefer_markdown_output": true,
      "fallback_plain_text": true,
      "image_ocr_enabled": true,
      "max_file_size_mb": 25,
      "ocr_languages": [
        "eng",
        "rus"
      ]
    }
  }
}