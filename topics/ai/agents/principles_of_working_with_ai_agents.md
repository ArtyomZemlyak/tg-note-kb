# Принципы работы с ИИ-агентами в программировании

## Введение

Работа с ИИ-агентами в программировании требует адаптации традиционных подходов к управлению разработкой. Ниже описаны ключевые принципы, выработанные на основе опыта разработки с использованием ИИ-агентов, особенно в контексте вайбкодинга (vibecoding).

## Принцип 1: Итеративный подход

### Проблема
Агенты имеют ограничения по обработке объемных изменений за один раз. Даже мощные модели вроде Claude 4.5 могут "забывать" детали задачи при крупных рефакторингах (2000+ строк изменений), что приводит к частичной реализации или ошибкам.

### Решение
- Разбивать задачи на максимально мелкие подзадачи
- Использовать двухэтапный подход:
  1. Сначала агент генерирует план выполнения задачи
  2. Человек корректирует план при необходимости
  3. Затем агент реализует план итеративно

### Применение
- Это особенно важно при работе с архитектурными изменениями
- Позволяет избежать "рекурсии" при неверной интерпретации задачи
- Повышает качество реализации за счет пошаговой проверки

## Принцип 2: Четкость инструкций

### Проблема
Несмотря на кажущуюся "интеллектуальность", ИИ-агенты требуют четких инструкций. Обобщенные описания могут привести к неправильной интерпретации задачи. Повторные попытки часто требуются, чтобы агент правильно реализовал задачу, если инструкции были неполными.

### Решение
- Формулировать задачи максимально конкретно
- Уточнять архитектурные решения
- Четко описывать ожидаемое поведение систем и компонентов
- Указывать концепции, которые не должны нарушаться

### Пример
В проекте tg-note агенту было сказано, что бот должен полностью управлять индексацией, а MCP (Model Context Protocol) должен предоставлять только функциональность для закидывания текстов. Но Claude решил, что MCP должен сам определять, какие файлы индексировать, что противоречило концепции. После уточнения инструкций агент исправил логику.

## Принцип 3: Прозрачность

### Определение
Прозрачность включает в себя понятность, ясность и структурированность кода и архитектуры. Чем запутаннее требования, инструкции или код, тем сложнее агентам что-либо сделать.

### Решение
- Поддерживать чистую архитектуру
- Обеспечивать четкую документацию
- Использовать итеративный подход и четкие инструкции (см. другие принципы)

### Преимущества
- Агенту легче понять структуру кода
- Легче выполнить задачи по модификации
- Уменьшается вероятность ошибок из-за непонимания контекста

## Инженерные практики

### Качественная архитектура
- Проработка архитектуры до начала работы агентов
- Использование принципов SOLID, которые агенты хорошо понимают
- Минимизация связанности кода
- Четкое разделение ответственности

### Подробное логирование
- Помогает агенту понять, что произошло в случае ошибки
- Позволяет агенту анализировать стектрейсы и логи для устранения багов
- Улучшает контекст для работы с проблемами

## Связи с другими темами

- [[vibecoding.md]] - Общее понятие вайбкодинга и его принципов
- [[code_agents/index.md]] - Общая информация о кодовых агентах
- [[planact_approach.md]] - Подход "планируй и действуй", схожий с итеративным подходом
- [[software_architecture/SOLID_principles.md]] - Принципы SOLID, важные для архитектуры
- [[problems_and_limitations_of_ai_agents.md]] - Проблемы и ограничения, с которыми сталкиваются при работе с ИИ-агентами
- [[anthropic_skills_approach.md]] - Подход Anthropic к использованию инструментов ИИ-агентами
- [[../tools/rules_template.md]] - Шаблон правил для ИИ-ассистентов кодирования, поддерживающий принципы работы с ИИ-агентами
- [[workflow_patterns_for_ai_development.md]] - Шаблоны рабочих процессов для ИИ-разработки, основанные на этих принципах