# Контекстная инъекция (Context Injection) в AI-агентах

## Описание

Контекстная инъекция - это метод, при котором AI-система автоматически подает релевантный контекст в промпт без явного запроса от пользователя. В контексте интеграции с Claude Code, это позволяет локальному агенту автоматически предоставлять нужный контекст при обнаружении соответствующего запроса пользователя, без необходимости явного вызова Claude.

## Принцип работы

Контекстная инъекция работает следующим образом:

1. Система отслеживает ввод пользователя или запрос
2. Анализирует запрос на предмет необходимости дополнительного контекста
3. Автоматически извлекает и подает соответствующий контекст в промпт
4. Передает запрос и контекст в LLM для обработки

## Типы контекстной инъекции

### Автоматическая инъекция
Система автоматически определяет необходимость контекста и подает его без явного запроса пользователя. Примером является Happy Coder, который может подкидывать нужный контекст, когда видит запрос пользователя, без явного вызова Claude.

### Условная инъекция
Контекст подается при выполнении определенных условий или срабатывании триггеров в тексте запроса.

### Интерактивная инъекция
Контекст подается в рамках интерактивного режима, когда локальный агент активно отслеживает запросы и реагирует на них.

## Применение

Контекстная инъекция особенно полезна в следующих сценариях:

- **Разработка ПО с AI-ассистентами** - Автоматическое предоставление релевантного кода, документации или архитектурных решений
- **Интеграция с рабочими процессами** - Бесшовное включение дополнительного контекста в существующие процессы
- **Улучшение качества ответов** - Предоставление LLM дополнительной информации для более точных ответов
- **Уменьшение когнитивной нагрузки** - Пользователю не нужно явно указывать необходимый контекст

## Техническая реализация

### Мониторинг запросов
Локальные агенты могут отслеживать ввод пользователя и анализировать его для определения необходимости дополнительного контекста.

### Извлечение контекста
Система должна эффективно извлекать релевантный контекст из доступных источников (файлов, баз знаний, истории разговоров).

### Интеграция с LLM
Контекст должен быть корректно сформирован и введен в промпт перед передачей в LLM.

## Примеры использования

- Happy Coder автоматически предоставляет контекст Claude Code при обнаружении соответствующего запроса пользователя
- Системы Retrieval-Augmented Generation (RAG) автоматически извлекают информацию из внешних источников
- Кодовые ассистенты подают релевантный код и документацию из текущего проекта

## Связи с другими темами

[[ai/agents/code_agents/happy_local_agent.md]] - Реализация автоматической инъекции контекста в локальном агенте Happy
[[ai/tools/claude_code.md]] - Интеграция контекста в рабочий процесс Claude Code
[[ai/llm/llm_memory_systems/llm_memory_overview.md]] - Общие концепции памяти в LLM, включая контекстную информацию
[[ai/agents/anthropic_skills_approach.md]] - Подход Anthropic к использованию инструментов, включающий контекстное обогащение

## Ссылки на источники

- [[https://github.com/slopus/happy]] - Реализация автоматической инъекции контекста в проекте Happy
- [[https://docs.anthropic.com/en/docs/building-with-ai/managing-conversation-context]] - Документация Anthropic о работе с контекстом