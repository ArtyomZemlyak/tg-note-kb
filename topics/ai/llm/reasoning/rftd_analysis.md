# RFTD - Rollout-based Forking Token Detection

## Краткое описание

RFTD (Rollout-based Forking Token Detection) - это метод анализа поведения моделей, разработанный для выявления настоящих "узловых" решений в цепочке рассуждений. Метод позволяет определить, какие токены действительно влияют на конечный результат, а не просто следуют за ним.

## Основная информация

RFTD вводится в исследовании как инструмент для понимания того, что именно усваивает модель при обучении с разными методами. В отличие от простой проверки энтропии токена, RFTD проверяет, изменяет ли замена токена исход конечного ответа при последующих развёртках.

### Как работает RFTD

1. **Анализ развилочных токенов**: Проверяет, меняет ли замена конкретного токена исход конечного ответа
2. **Сравнение стратегий**: Позволяет сравнить, какие токены становятся "развилочными" при разных методах обучения
3. **Диагностика модели**: Показывает, действительно ли модель "цепляется" за смысловые шаги шаблона, а не за риторику

### Результаты применения RFTD

Исследование показало:
- **У SFT+RLVR**: Частые развилочные токены соответствуют содержательным шагам шаблона задачи (например, `annual`, `operating_income`, `different`)
- **У UFT/pure-RLVR**: Развилочные токены в основном общие связки «but», «because», «if» и т. п. (мета-рассуждение, а не ядро алгоритма)
- **Вывод**: SFT+RLVR лучше внутренне выучивает шаблон решения

## Новые концепции и термины

- **Развилочные токены (Forking tokens)**: Токены, замена которых влияет на конечный результат
- **Развёртка (Rollout)**: Процесс продолжения генерации после замены токена для определения влияния на конечный ответ
- **Содержательные шаги шаблона**: Значимые элементы решения, а не просто риторические связки
- **Мета-рассуждение**: Общие языковые связки, не относящиеся к сути задачи

## Примеры применения

RFTD особенно полезен для:
- **Диагностики обученных моделей**: Понимание, действительно ли модель усваивает нужные шаблоны
- **Сравнения методов обучения**: Определение, какой подход лучше обучает модели шаблонам
- **Оптимизации обучения**: Понимание, какие элементы рассуждения действительно влияют на результат
- **Качественной оценки**: Анализ того, насколько модель "думает по делу", а не "красиво рассуждает"

## Практическое значение

- **Проверка эффективности обучения**: Убеждение, что модель действительно усваивает содержательные шаги шаблона
- **Оптимизация промптов**: Понимание, какие элементы промптов приводят к более "смысловому" поведению модели
- **Диагностика проблем**: Выявление, когда модель "обманывает" систему, используя риторические шаблоны вместо логических рассуждений

## Связи с другими темами

- [[ai/reasoning/pattern_learning/paro.md]] - PARO использует RFTD для диагностики моделей
- [[ai/reasoning/sft_rlvr_methodology.md]] - RFTD показывает, что SFT+RLVR лучше усваивает шаблоны
- [[ai/reasoning/reasoning_patterns.md]] - Метод помогает понять, как модели используют шаблоны рассуждения
- [[ai/applications/financial_reasoning/financial_reasoning_tasks.md]] - Используется для диагностики моделей в финансовых задачах
- [[ai/reinforcement_learning/laser_reinforcement_learning.md]] - Другой метод анализа поведения моделей при обучении с подкреплением