# Стратегии Chunking'а в RAG-системах

## Описание

Chunking - это процесс разбиения входного текста на более мелкие фрагменты (чанки), которые затем индексируются в векторной базе данных. От качества chunking'а зависит точность извлечения релевантной информации в RAG-системах.

## Основные подходы

### 1. Sliding Window (Скользящее окно)

- Использует перекрывающиеся фрагменты для сохранения контекста между чанками
- Позволяет избежать проблем с разрывом контекста
- Особенно эффективен для документов с логическими сегментами

### 2. По предложению/абзацу

- Разделение текста на логические единицы (предложения, абзацы)
- Сохраняет семантическую целостность фрагментов
- Упрощает обработку структурированного текста

### 3. Семантическое разбиение

- Использование алгоритмов для определения семантических границ
- Сохранение смысловой целостности чанков
- Может использовать векторные представления для определения границ

## Популярные библиотеки и подходы

### Langchain Text Splitters

- [Репозиторий](https://github.com/langchain-ai/langchain/tree/master/libs/text-splitters)
- Предоставляет различные стратегии разбиения текста
- Включает рекурсивное разбиение, разбиение по символам и др.

### Chonkie - специализированный фреймворк

- Tired of making your gazillionth chunker? 
- Sick of the overhead of large libraries?
- Want to chunk your texts quickly and efficiently?
- Chonkie - the mighty hippo is here to help!
- [Репозиторий](https://github.com/chonkie-inc/chonkie)
- Легковесная альтернатива крупным фреймворкам
- Оптимизирован для быстрого и эффективного chunking'а

## Практические рекомендации

### Оптимальный размер чанка

- Обычно от 100 до 1000 токенов
- Зависит от типа контента и модели эмбеддингов
- Нужно балансировать между контекстом и специфичностью

### Перекрытие чанков

- Используйте перекрытие для сохранения контекста
- Обычно 10-25% от размера чанка
- Помогает при извлечении информации на границах чанков

## Связи с другими темами

- [[./overview.md]] - Общие рекомендации по RAG практикам
- [[../retrieval_strategies.md]] - Стратегии поиска для RAG систем
- [[../embedding_models.md]] - Модели для генерации эмбеддингов

## Источники

1. [Langchain Text Splitters](https://github.com/langchain-ai/langchain/tree/master/libs/text-splitters) - официальные реализации различных подходов к разбиению текста в Langchain
2. [Chonkie GitHub Repository](https://github.com/chonkie-inc/chonkie) - специализированная библиотека для chunking'а, разработанная как легковесная альтернатива большим фреймворкам
3. [Best RAG Practices (2024)](https://arxiv.org/abs/2407.01219) - исследование, включающее анализ различных подходов к chunking'у и его влияния на качество RAG-систем