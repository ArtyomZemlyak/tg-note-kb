# Концепт 1: Многоэкспертная персонализированная LLM с доменной специализацией

## Описание концепта

Этот подход использует архитектуру Mixture of Experts (MoE) с экспертом, специализированным на каждом сервисе (Самокат, Мегамаркет, Купер), а также универсальным экспертом для кросс-доменных рекомендаций. Каждый доменный эксперт обучен на истории взаимодействий из соответствующего сервиса и может генерировать персонализированные рекомендации в своем домене.

## Архитектура

### Слой экспертов
- **Самокат-Эксперт**: Специализируется на рекомендациях еды, доставки, ресторанов
- **Мегамаркет-Эксперт**: Специализируется на товарах, продуктах, покупках
- **Купер-Эксперт**: Специализируется на здоровье, фитнесе, витаминах
- **Кросс-доменный эксперт**: Обрабатывает запросы, требующие информации из нескольких доменов

### Система маршрутизации
- **Семантический анализатор**: Определяет домен запроса пользователя
- **Маршрутизатор профиля**: Определяет, какие аспекты пользовательского профиля наиболее релевантны
- **Агрегатор ответов**: Объединяет результаты от нескольких экспертов

### Слой персонализации
- **Унифицированный профиль пользователя**: Векторное представление всех действий пользователя в разных сервисах
- **Временные эмбеддинги**: Учет временных паттернов поведения
- **Контекстные эмбеддинги**: Учет текущего контекста (день недели, погода и т.д.)

### Механизм внимания
- **Персонализированное внимание**: Внимание к элементам, основанным на пользовательском профиле
- **Кросс-доменное внимание**: Возможность обращения к информации из разных доменов

## Обучение

### Претрейнинг
- Базовая LLM (например, Qwen-2 72B) обучается на общем корпусе
- Эксперты инициализируются из базовой модели и дообучаются на доменных данных

### Файнтюнинг
- Кросс-доменные задачи для кросс-доменного эксперта
- Диалоговые задачи для обучения диалоговому взаимодействию
- Задачи объяснения рекомендаций

## Преимущества

- Высокая эффективность за счет разреженности вычислений
- Специализация экспертов на каждом домене
- Возможность кросс-доменных рекомендаций
- Масштабируемость для большого числа пользователей

## Ограничения

- Требует больших вычислительных ресурсов для хранения всех экспертов
- Сложность в балансировке нагрузки между экспертами
- Возможные проблемы с тонкой настройкой