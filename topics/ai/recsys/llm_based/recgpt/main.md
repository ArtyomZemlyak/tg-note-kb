# RecGPT (Alibaba) - Технический отчет

## Описание

RecGPT - это революционный подход к построению рекомендательных систем, предложенный Alibaba. В отличие от традиционных LLM-based рекомендательных систем, где языковая модель может выступать как рекомендательный индекс или генератор итоговой выдачи, RecGPT использует LLM лишь для суммаризации пользовательских предпочтений и генерации объяснений к рекомендациям. Это позволяет значительно сократить вычислительные затраты и улучшить производительность системы.

Согласно техническому отчету, RecGPT стал первым в промышленности разумно-усиленным рекомендательным фундаментальным решением на сотни миллиардов параметров, развернутым в промышленных приложениях, обслуживающих более миллиарда потребителей и предметов. Система была полностью внедрена в качестве основной рекомендательной системы на главной странице Taobao, заменив собой старую рекомендательную систему.

## Архитектура

### Основные компоненты

Архитектура RecGPT включает в себя пять ключевых этапов:

1. **Представление пользователя в виде текста**:
   - Пользователь описывается с использованием базовых признаков (пол, возраст и т.д.)
   - Добавляется история действий пользователя
   - Весь профиль пользователя преобразуется в текстовое описание

2. **Извлечение интересов пользователя с помощью LLM**:
   - LLM анализирует профиль пользователя и выделяет его "интересы" (например, "Parenting & Baby Care")
   - Интересы обновляются с задержкой в сутки
   - LLM суммаризует долгосрочные и краткосрочные предпочтения пользователя

3. **Генерация тэгов из интересов с помощью LLM**:
   - На основе выделенных интересов LLM генерирует конкретные "тэги" (например, "Baby Bath Temperature Sensor")
   - Эти тэги служат промежуточным уровнем между интересами и конкретными предметами

4. **Вычисление релевантности с помощью легкой 3-tower DNN**:
   - Это единственное место во всем пайплайне, где используются логи сервиса
   - 3-tower DNN вычисляет релевантность между тэгом и товаром, а также между товаром и пользователем
   - Система использует очень легкую архитектуру DNN (в отличие от тяжелых LLM) для удовлетворения требований по задержке и пропускной способности

5. **Генерация объяснений к рекомендациям с помощью LLM**:
   - LLM генерирует персонализированные объяснения для каждой рекомендации
   - Объяснения помогают пользователям понять, почему им рекомендован тот или иной предмет

### Особенности архитектуры

- **Разумная интеграция**: LLM не используется для прямого предсказания, а служит для суммаризации и объяснения
- **Гибридный подход**: сочетание LLM и легкой DNN архитектуры позволяет достичь баланса между качеством и производительностью
- **Интерпретируемость**: процесс построения рекомендаций становится более понятным благодаря промежуточным этапам

## Методология

RecGPT использует инновационный подход, при котором:
- Предпочтения пользователя извлекаются через резонанс (reasoning) с использованием LLM
- Регулярное дообучение происходит только на основе разметки "LLM как судья" (LLM as a judge)
- Система обновляет интересы пользователя с суточной задержкой, что позволяет учитывать изменения в интересах без чрезмерной латентности

## Результаты

- Система была успешно развернута на главной странице Taobao, заменив старую рекомендательную систему
- Приведенные результаты A/B тестирования показали впечатляющие улучшения
- Это первый случай развертывания рекомендательной системы масштаба сотен миллиардов параметров, обслуживающей более миллиарда пользователей

## Сравнение с другими подходами

Авторы статьи упоминают, что представили аналогичный подход на KDD'25, где система использовалась как дополнительный генератор кандидатов к старому стеку, а не как полная замена. Несмотря на схожесть основных идей, детали реализации значительно отличаются.

RecGPT также имеет связь с BERT4Rec - один из основных разработчиков RecGPT является соавтором BERT4Rec, что указывает на преемственность идей в области рекомендательных систем.

В более общем контексте, RecGPT представляет "менее революционный" подход по сравнению с методами, где LLM напрямую генерируют айтемы на языке айтемов домена с помощью Semantic IDs (как в Google и Kuaishou). Вместо этого, RecGPT использует последовательность из нескольких LLM, каждая из которых дообучается на конкретную задачу, но финальные рекомендации строит не-LLM модель.

### Подходы к кандидат-генерации

В отличие от подходов, где LLM напрямую выступает в роли кандидат-генератора, RecGPT использует LLM для:
- Майнинга интересов пользователя из его истории взаимодействий
- Предсказания "тегов" (описаний) следующих айтемов по знанию о мире, без использования коллаборативных сигналов
- Генерации объяснений к рекомендациям

Фактически, RecGPT использует LLM для подготовки промежуточных представлений (интересов и тегов), а затем применяет традиционную 3-башенную модель (Айтем-Юзер-Тег) для вычисления релевантности на основе коллаборативных сигналов.

## Преимущества подхода

- **Интерпретируемость**: процесс построения рекомендаций позволяет уменьшить цикл обратной связи
- **Объяснимость**: возможность построения объяснимых рекомендаций с персонализированным основанием для веры
- **Обобщение**: обширные знания LLM усиливают способность модели к обобщению, особенно на холодных предметах и в тяжелом хвосте
- **Масштабируемость**: легкая DNN архитектура позволяет удовлетворять требованиям по задержке и пропускной способности

## Ограничения подхода

- **Суточные задержки**: обновление интересов пользователя происходит не в реальном времени
- **Ручной характер**: подход требует ручной настройки на нескольких этапах
- **Отказ от end2end**: система делает шаг в сторону от полностью интегрированной end2end архитектуры
- **Ограниченное использование коллаборативных сигналов**: в процессе генерации тегов LLM использует свои знания о мире, но не коллаборативные сигналы из данных сервиса

## Связи с другими темами

- [[../llm_based/main.md]] - Общая информация о LLM-based рекомендательных системах
- [[ai/llm/applications/llm_applications.md]] - Применение LLM в различных доменах
- [[ai/recsys/traditional_approaches.md]] - Традиционные подходы к рекомендательным системам, с которыми сравнивается RecGPT
- [[ai/recsys/llm_based/onerec_think/main.md]] - OneRec-Think: сравниваемая система LLM-рекомендаций от Kuaishou
- [[ai/recsys/ranking.md]] - Ранжирование в рекомендательных системах: RecGPT включает компоненты ранжирования
- [[ai/recsys/llm_based/linkedin_large_scale_retrieval.md]] - Сравниваемый подход: LinkedIn к LLM-базированной кандидат-генерации