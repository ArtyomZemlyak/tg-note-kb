# Ошибки синхронизации Git: Repository has uncommitted changes

## Краткое описание

Ошибка "Repository has uncommitted changes. Commit or stash them first" возникает при попытке синхронизации Git-репозитория (например, через `git pull`, `git push`, или другие команды, требующие чистого состояния), когда в рабочем каталоге есть несохраненные изменения.

## Причины возникновения ошибки

### 1. Несохраненные изменения файлов
- Файлы в рабочем каталоге были изменены, но изменения не были зафиксированы (committed) или добавлены в индекс (staged)
- Git блокирует операции синхронизации, чтобы избежать потери локальных изменений

### 2. Состояние репозитория
- В репозитории есть модифицированные файлы
- Новые файлы могут быть добавлены в индекс, но не зафиксированы
- Рабочее дерево не соответствует последнему коммиту (HEAD)

## Решения проблемы

### Решение 1: Фиксация изменений (Commit)

Сохраните текущие изменения, создав новый коммит:

```bash
# Добавить все измененные файлы в индекс
git add .

# Или добавить конкретные файлы
git add файл1 файл2

# Создать коммит с описанием
git commit -m "Описание изменений"
```

После этого можно выполнить синхронизацию:
```bash
git pull
git push
```

### Решение 2: Временное сохранение изменений (Stash)

Сохраните изменения временно, чтобы выполнить синхронизацию, а затем восстановить изменения:

```bash
# Временно сохранить изменения
git stash

# Выполнить синхронизацию
git pull
git push

# Восстановить сохраненные изменения
git stash pop
```

### Решение 3: Проверка состояния репозитория

Перед выполнением синхронизации проверьте состояние репозитория:

```bash
# Проверить текущее состояние
git status

# Просмотреть изменения
git diff

# Просмотреть изменения в индексе
git diff --cached
```

## Детали команд

### Команда git status
Показывает состояние рабочего дерева и индекса:
- `M` - модифицированный файл
- `??` - неотслеживаемый файл
- `A` - добавленный файл

### Команда git stash
Временное сохранение изменений:
- `git stash push` - сохранение изменений
- `git stash list` - просмотр списка stash
- `git stash pop` - применение и удаление последнего stash
- `git stash apply` - применение stash без удаления

### Команда git commit
Фиксация изменений в репозитории:
- `git commit -m "сообщение"` - создание коммита с сообщением
- `git commit -a -m "сообщение"` - автоматическое добавление изменений перед коммитом
- `git commit --amend` - изменение последнего коммита

## Рекомендации

### 1. Регулярные коммиты
- Создавайте маленькие, логически завершенные коммиты
- Используйте информативные сообщения коммитов
- Проверяйте изменения перед коммитом с помощью `git diff`

### 2. Использование stash
- Используйте `git stash` для временного хранения изменений при необходимости синхронизации
- Добавляйте описания к stash при помощи `git stash push -m "описание"`
- Проверяйте содержимое stash с помощью `git stash show`

### 3. Понимание состояния репозитория
- Используйте `git status` перед выполнением операций
- Понимайте разницу между рабочим деревом, индексом и HEAD
- Регулярно проверяйте историю коммитов с помощью `git log`

## Связь с другими темами

- [[version_control_systems.md]] - Основы систем контроля версий и Git
- [[git_based_memory_systems.md]] - Git-ориентированные системы памяти для ИИ-агентов
- [[diffmem_git_based_memory.md]] - Git-базированная дифференциальная память

## Лучшие практики

1. **Регулярная синхронизация**: Обновляйте локальный репозиторий перед началом работы
2. **Частые коммиты**: Сохраняйте прогресс регулярно маленькими коммитами
3. **Проверка изменений**: Всегда проверяйте содержимое изменений перед коммитом
4. **Использование веток**: Работайте в отдельных ветках для разных задач
5. **Шаблоны .gitignore**: Используйте файл .gitignore для исключения временных файлов

## Источники

1. [Git Documentation: Git Stash](https://git-scm.com/docs/git-stash) - официальная документация Git по команде stash, которая позволяет временно сохранить изменения
2. [Git Documentation: Git Status](https://git-scm.com/docs/git-status) - официальная документация Git по команде status, которая показывает состояние рабочего дерева
3. [Git Documentation: Git Commit](https://git-scm.com/docs/git-commit) - официальная документация Git по команде commit, которая фиксирует изменения в репозитории
4. [Atlassian Git Tutorial: Syncing](https://www.atlassian.com/git/tutorials/syncing) - руководство по синхронизации Git-репозиториев и решению проблем